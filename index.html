<head>

<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />


</head>
<html>
	<body>

		<div class="box" id="box1" style="border:1px solid black;height:83vh">
			<h3> Touch Me! </h3>
			<h3 id="statusdiv">Status</h3>
		
		</div>
	
	</body>
</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>

<script>
/**
 * @license
 * touchtap-event <http://github.com/Tyriar/touchtap-event>
 * Copyright 2014 Daniel Imms <http://www.growingwiththeweb.com>
 * Released under the MIT license <http://github.com/Tyriar/touchtap-event/blob/master/LICENSE>
 */
(function () {
  'use strict';

  var touchTapEvent;
  var isTapLength;
  var tapLengthTimeout;
  var startPosition = { x: -1, y: -1 };
  var currentPosition = { x: -1, y: -1 };

  /**
   * Gets the touch object from a touch* event.
   * @param {Event} e The event.
   * @returns {Touch} The (first) touch object from the event.
   */
  function getTouchObject(e) {
    if (e.originalEvent && e.originalEvent.targetTouches) {
      return e.originalEvent.targetTouches[0];
    }
    if (e.targetTouches) {
      return e.targetTouches[0];
    }
    return e;
  }

  /**
   * Gets whether two numbers are approximately equal to each other.
   * @param {number} a The first number.
   * @param {number} b The second number.
   * @returns {Boolean}
   */
  function approximatelyEqual(a, b) {
    return Math.abs(a - b) < 2;
  }

  /**
   * Handler for the touchstart event.
   * @param {Event} e The touchstart event.
   */
  function touchstart(e) {
    var touchObject = getTouchObject(e);
    startPosition.x = touchObject.pageX;
    startPosition.y = touchObject.pageY;
    currentPosition.x = touchObject.pageX;
    currentPosition.y = touchObject.pageY;
    isTapLength = true;
    if (tapLengthTimeout) {
      clearTimeout(tapLengthTimeout);
    }
    tapLengthTimeout = setTimeout(function () {
      isTapLength = false;
    }, 200);
  }

  /**
   * Handler for the touchend event.
   * @param {Event} e The touchend event.
   */
  function touchend(e) {
    if (isTapLength &&
        approximatelyEqual(startPosition.x, currentPosition.x) &&
        approximatelyEqual(startPosition.y, currentPosition.y)) {
      touchTapEvent.customData = {
        touchX: currentPosition.x,
        touchY: currentPosition.y
      };
      e.target.dispatchEvent(touchTapEvent);
    }
  }

  /**
   * Handler for the touchmove event.
   * @param {Event} e The touchmove event.
   */
  function touchmove(e) {
    var touchObject = getTouchObject(e);
    currentPosition.x = touchObject.pageX;
    currentPosition.y = touchObject.pageY;
  }

  /**
   * Initialises the library.
   */
  function init() {
    touchTapEvent = document.createEvent('CustomEvent');
    touchTapEvent.initEvent('touchtap', true, true);
    document.addEventListener('touchstart', touchstart);
    document.addEventListener('touchend', touchend);
    document.addEventListener('touchcancel', touchend);
    document.addEventListener('touchmove', touchmove);
  }

  init();
})();

</script>

<script>

window.addEventListener('load', function(){
	
	var box1 = document.getElementById('box1');
    var statusdiv = document.getElementById('statusdiv');
    var startx = 0;
	var starty = 0;
	var intThing, rclickThing;
	var touchobj;
	var width = $(document).width()*0.85;
	
	function rclick(){
	
		clearInterval(rclickThing);
		
		$.ajax({
				url: "rclick",
				type: "get"
					
			});
	
	}
	
	function calc(){
		// var dist = Math.sqrt(Math.pow(parseInt(touchobj.clientX) - startx,2) + Math.pow(parseInt(touchobj.clientY) - starty,2));
		// var angleDeg = 180 - Math.atan2((parseInt(touchobj.clientY) - starty) , (parseInt(touchobj.clientX) - startx)) * (180 / Math.PI);
		// if (angleDeg < 0){
			// angleDeg = angleDeg + 360;
		// }
		
		// statusdiv.innerHTML = 'Status: touchmove<br> Horizontal distance traveled: ' + dist + 'px';
		
		var x = parseInt(touchobj.clientX) - startx;
		var y = parseInt(touchobj.clientY) - starty;
		
		if( (x != 0 || y != 0)  && ( width < parseInt(touchobj.clientX) ) ){
		
			$.ajax({
				url: "scroll",
				type: "get",
				data:{"y":-y*3}
					
			});
		
		} else if( (x != 0 || y != 0) ){
				
			// $.ajax({
				// url: "move.php",
				// type: "get",
				// data:{"px":-dist,"ang":angleDeg}
					
			// });
			
			$.ajax({
				url: "move",
				type: "get",
				data:{"x":x*2,"y":y*2}
					
			});
				
		}
		
		startx = parseInt(touchobj.clientX);
		starty = parseInt(touchobj.clientY);
		
	}
	
	box1.addEventListener('touchstart', function(e){ 
		touchobj = e.changedTouches[0];
		startx = parseInt(touchobj.clientX);
		starty = parseInt(touchobj.clientY);
		intThing = setInterval(calc, 50);
		rclickThing = setInterval(rclick, 750);
		e.preventDefault(); 
	
	});
 
    box1.addEventListener('touchmove', function(e){
		
        touchobj = e.changedTouches[0];
		clearInterval(rclickThing);
		
		e.preventDefault();
		
    }, false)
	
	box1.addEventListener('touchend', function(e){ 
		var startx = 0;
		var starty = 0;
		var intThing;
		var touchobj;
		clearInterval(intThing);
		e.preventDefault(); 
		clearInterval(rclickThing);
	
	});
	
	box1.addEventListener('touchtap', function(e){
		
        $.ajax({
				url: "click",
				type: "get"
					
			});
		
		e.preventDefault();
		
    }, false)
 
}, false)
 
</script>